{% extends "layout.html" %}
{% block title %}User Administration - {{ campname }}{% endblock %}
{% block head %}
    <script>

        function validate(ob) {
            if ($('.checkbox:checked').length > 0) {
                return true
            }
            else {
                return false
            }
        }

        $(document).ready(function () {

            $(function () {
                $(".tablesorter").tablesorter({
                    sortList: [[4, 1]]
                });
            });

            //select all checkboxes
            $("#select_all").change(function () {  //"select all" change 
                $(".checkbox").prop('checked', $(this).prop("checked")); //change all ".checkbox" checked status
            });

            //".checkbox" change
            $('.checkbox').change(function () {
                //uncheck "select all", if one of the listed checkbox item is unchecked
                if (false == $(this).prop("checked")) { //if this item is unchecked
                    $("#select_all").prop('checked', false); //change "select all" checked status to false
                }
                //check "select all" if all checkbox items are checked
                if ($('.checkbox:checked').length == $('.checkbox').length) {
                    $("#select_all").prop('checked', true);
                }
            });
        });

    </script>
{% endblock %}
{% block breadcrumbs %}
<li class="w3-hide-small"><a href="#" class="w3-hover-white">User Administration</a></li>
{% endblock %}
{% block sidenav %}
<h4><b>Tools</b></h4>
<a href="/user/{{ thisuser.userid }}/newuser/" class="w3-hover-black"><i class="fa fa-male"></i> New User</a>
<a href="#" class="w3-hover-black submit_button" id="email_users" data-method="POST" data-url="/user/{{ thisuser.userid }}/email/"><i class="fa fa-envelope-o save_icon"></i><i class="fa fa-circle-o-notch fa-spin spin_icon"></i> Email Selected Users</a>
{% endblock %}
{% block content %}
    <p>Total number of users: {{ users|length }}</p>
    <table style="width:100%" class="tablesorter">
        <thead>
            <tr>
                <td><input type="checkbox" id="select_all"></td>
                <th>First</th>
                <th>Last</th>
                <th class="w3-hide-small">Active</th>
                <th>Playcount</th>
                <th>Home</th>
            </tr>
        </thead>
        <tbody class="zebra-table">
            {% if users != None %}
            {% for u in users %}
            <tr>
                <td><input type="checkbox" value="{{ u.userid }}" data-key="userid" data-mapping="{{ u.userid }}" class="checkbox form-object-master form-validate"></td>
                <td><a href="/user/{{ thisuser.userid }}/edituser/{{ u.userid }}/">{{ u.firstname }}</a></td>
                <td><a href="/user/{{ thisuser.userid }}/edituser/{{ u.userid }}/">{{ u.lastname }}</a></td>
                <td class="w3-hide-small">{% if u.isactive == 1 %}Yes{% else %}No{% endif %}</td>
                <td>{{ u.playcount }}</td>
                <td><a href="/user/{{ u.userid }}/">Home</a></td>
            </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>
{% endblock %}
{% block footer %}{% endblock %}